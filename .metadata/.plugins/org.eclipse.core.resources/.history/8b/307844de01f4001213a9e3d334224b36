package br.usp.ime.tcc.filter;

import android.graphics.Bitmap;
import android.graphics.Color;
import android.graphics.ColorMatrixColorFilter;
import android.graphics.Matrix;

public class Filter {
	public Filter(double intensity) {
		double alpha = calculaAlpha(intensity);
		double beta = calculaBeta(intensity);
		double gama = 1 - (alpha + beta);
		
		float[] filterMatrix = {
			    1, 0, alpha, 0, 0,
			    0, 1, beta, 0, 0,
			    0, 0, gama, 0, 0,
			    0, 0, 0, 1, 0,
		};
		
		ColorMatrixColorFilter colorMatrixColorFilter = new ColorMatrixColorFilter(filterMatrix);
	}

	private double calculaAlpha(double intensity) {
		return intensity >= 0 ? 0 : -intensity;
	}

	private double calculaBeta(double intensity) {
		return calculaAlpha(-intensity);
	}
	
	public Bitmap applyTo(Bitmap bmp) {
		if (bmp == null)
			return null;
		
		int width = bmp.getWidth();
		int height = bmp.getHeight();
		
		Bitmap filtered = Bitmap.createBitmap(bmp, 0, 0, width, height, new Matrix(), true);

		return filtered;
	}
}
